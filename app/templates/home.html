{% extends 'base.html' %}
{% import "bootstrap/wtf.html" as wtf %}
{# How the page LOOKS #}

{% block title %}Ragtime{% endblock %}

{% block page_content %}
<h1>Welcome to Ragtime,
    {% if current_user.is_authenticated %}{{ current_user.username }}{% else %}Anonymous{% endif %}!
</h1>
<div class="page-header">
    <p>Enjoy your stay.</p>
</div>
<div>
    {% if current_user.can(Permission.PUBLISH) %}
    {{ wtf.quick_form(form) }}
    {% endif %}
</div>
<ul class="compositions">
    {% for composition in compositions %}
    <li class = "composition">
        <div class="profile-thumbnail">
            <a href="{{ url_for('.user', username=composition.artist.username) }}">
                <img class="img-rounded profile-thumbnail"
                    src="{{ composition.artist.unicornify(size=64) }}">
            </a>
        </div>
        <div class="composition-date">{{ moment(composition.timestamp).fromNow() }}</div>
        <div class="composition-artist">
            <a href="{{ url_for('.user', username=composition.artist.username) }}">
                {{ composition.artist.username }}
            </a>
        </div>
        <div class="composition-release-type">{{ composition.release_type }}</div>
        <div class="composition-title">{{ composition.title }}</div>
        <div class="composition-description">{{ composition.description }}</div>
    </li>
    {% endfor %}
</ul>
{% endblock page_content %}

